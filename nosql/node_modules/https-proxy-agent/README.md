---
ms.openlocfilehash: bd96d4c9278b37a2a3626abd3bd91dd20a15e2e1
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051907"
---
<a name="https-proxy-agent"></a>https-proxy-agent
================
### <a name="an-https-proxy-httpagent-implementation-for-https"></a>Implementazione di `http.Agent` del proxy HTTP(S) per HTTPS
[![Stato della compilazione](https://github.com/TooTallNate/node-https-proxy-agent/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-https-proxy-agent/actions?workflow=Node+CI)

Questo modulo fornisce un'implementazione di `http.Agent` che si connette a un server proxy HTTP o HTTPS specificato e può essere usato con il modulo `https` predefinito.

In particolare, questa implementazione di `Agent` si connette a un server "proxy" intermedio e rilascia il metodo [CONNECT HTTP][CONNECT], che indica al proxy di aprire una connessione TCP diretta al server di destinazione.

Poiché l'agente implementa il metodo HTTP CONNECT, funziona anche con altri protocolli che usano questo metodo durante la connessione tramite proxy (ad esempio, WebSocket).
Per ulteriori informazioni, vedere la sezione "Esempi".


<a name="installation"></a>Installazione
------------

Installare con `npm`:

``` bash
$ npm install https-proxy-agent
```


<a name="examples"></a>Esempio
--------

#### <a name="https-module-example"></a>Esempio di modulo `https`

``` js
var url = require('url');
var https = require('https');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// HTTPS endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'https://graph.facebook.com/tootallnate';
console.log('attempting to GET %j', endpoint);
var options = url.parse(endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var agent = new HttpsProxyAgent(proxy);
options.agent = agent;

https.get(options, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

#### <a name="ws-websocket-connection-example"></a>Esempio di connessione WebSocket `ws`

``` js
var url = require('url');
var WebSocket = require('ws');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// WebSocket endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'ws://echo.websocket.org';
var parsed = url.parse(endpoint);
console.log('attempting to connect to WebSocket %j', endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var options = url.parse(proxy);

var agent = new HttpsProxyAgent(options);

// finally, initiate the WebSocket connection
var socket = new WebSocket(endpoint, { agent: agent });

socket.on('open', function () {
  console.log('"open" event!');
  socket.send('hello world');
});

socket.on('message', function (data, flags) {
  console.log('"message" event! %j %j', data, flags);
  socket.close();
});
```

<a name="api"></a>API
---

### <a name="new-httpsproxyagentobject-options"></a>new HttpsProxyAgent(Object options)

La classe `HttpsProxyAgent` implementa una sottoclasse `http.Agent` che si connette al "server proxy HTTP(S)" specificato per il proxy HTTPS e/o richieste WebSocket. Questo si ottiene usando il [metodo HTTP `CONNECT`][CONNECT].

L'argomento `options` può essere un URI stringa del server proxy da usare o un oggetto "options" con proprietà più specifiche:

  * `host` - Stringa: host proxy a cui connettersi (si può usare anche `hostname`). Obbligatorio.
  * `port` - Numero: porta proxy a cui connettersi. Obbligatorio.
  * `protocol` - Stringa: se `https:`, usare TLS per connettersi al proxy.
  * `headers` - Oggetto: intestazioni HTTP aggiuntive da inviare nel metodo HTTP CONNECT.
  * Tutte le altre opzioni specificate vengono passate alle funzioni `net.connect()`/`tls.connect()`.


<a name="license"></a>Licenza
-------

(Licenza MIT)

Copyright (c) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

Questo documento concede l'autorizzazione, a titolo gratuito, a chiunque ottenga una copia di questo software e dei file della documentazione (il "Software"), di utilizzare il Software senza restrizioni, inclusi a titolo non esaustivo i diritti di utilizzo, copia, modifica, fusione, pubblicazione, distribuzione, concessione in sublicenza e/o vendita di copie del Software, e di consentire alle persone a cui è fornito il Software di eseguire queste azioni, fatte salve le seguenti condizioni:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

IL SOFTWARE VIENE FORNITO "COSÌ COM'È", SENZA ALCUNA GARANZIA, ESPRESSA O IMPLICITA, INCLUSE, A TITOLO ESEMPLIFICATIVO, LE GARANZIE DI COMMERCIABILITÀ, IDONEITÀ PER UNO SCOPO SPECIFICO E NON VIOLAZIONE DEI DIRITTI ALTRUI.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

[CONNECT]: http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_Tunneling
