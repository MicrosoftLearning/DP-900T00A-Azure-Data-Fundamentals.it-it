---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051085"
---
# <a name="rc"></a>rc

Caricatore di configurazione non configurabile per utenti pigri.

## <a name="usage"></a>Utilizzo

L'unica opzione consiste nel passare a rc il nome dell'app e la configurazione predefinita.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

`rc` restituirà le opzioni di configurazione unite alle impostazioni predefinite specificate.
Se si passa un oggetto predefinito con le impostazioni predefinite, verrà modificato:

```javascript
var conf = {};
require('rc')(appname, conf);
```

Se `rc` trova eventuali file di configurazione per l'app, l'oggetto config restituito avrà una matrice di `configs` contenente i relativi percorsi:

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>Standard

Dato il nome dell'applicazione (`appname`), rc cercherà la configurazione in tutte le posizioni ovvie.

  * argomenti della riga di comando, analizzati da minimist _(ad esempio `--foo baz`, anche annidati: `--foo.bar=baz`)_
  * variabili di ambiente con prefisso `${appname}_`
    * oppure usare "\_\_" per indicare proprietà annidate <br/> _(ad es. `appname_foo__bar__baz` => `foo.bar.baz`)_
  * se è stata passata un'opzione `--config file` da tale file
  * un valore `.${appname}rc` locale o il primo trovato cercando in `./ ../ ../../ ../../../` e così via
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * l'oggetto delle impostazioni predefinite passato.

Tutte le origini di configurazione trovate verranno appiattite in un unico oggetto, in modo che le origini **precedenti** in questo elenco sostituiscano quelle successive.


## <a name="configuration-file-formats"></a>Formati di file di configurazione

I file di configurazione, ad esempio `.appnamerc`, possono essere in formato [json](http://json.org/example) o [ini](http://en.wikipedia.org/wiki/INI_file). **Non** deve essere usata alcuna estensione di file (`.json` o `.ini`). Le configurazioni di esempio seguenti sono equivalenti:


#### <a name="formatted-as-ini"></a>Con il formato `ini`

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>Con il formato `json`

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

I commenti vengono rimossi dalla configurazione JSON tramite [strip-json-comments](https://github.com/sindresorhus/strip-json-comments).

> Poiché le variabili ini ed env non hanno uno standard per i tipi, l'applicazione deve essere preparata per le stringhe.

Per garantire che le rappresentazioni stringa di valori booleani e numeri vengano sempre convertite nei tipi appropriati (particolarmente utile se si intende eseguire confronti `===` rigorosi), è consigliabile usare un modulo come [parse-strings-in-object](https://github.com/anselanza/parse-strings-in-object) per eseguire il wrapping dell'oggetto config restituito da rc.


## <a name="simple-example-demonstrating-precedence"></a>Esempio semplice che illustra la precedenza
Si supponga di avere un'applicazione simile alla seguente (si notino le impostazioni predefinite hardcoded passate a rc):
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
È anche disponibile un file `config.json` con il contenuto seguente:
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
E un file `.myapprc` nella stessa cartella, con questi contenuti:
```
{
  "port": "3001",
  "foo": "bar"
}
```
Ecco l'output previsto da vari comandi:

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
L'*impostazione predefinita`mode` dell'oggetto hardcoded viene mantenuta, ma la porta viene sostituita dal file `.myapprc` (trovato automaticamente in base alla corrispondenza con il nome dell'app) e viene aggiunto `foo`.*


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*Stesso risultato dell'esempio precedente ma con l'override di `foo`, perché gli argomenti della riga di comando hanno la precedenza sul file `.myapprc`.*

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
*Ora `port` deriva dal file `config.json` specificato (eseguendo l'override del valore da `.myapprc`) e il valore `foo` viene sottoposto a override dalla riga di comando nonostante sia specificato anche nel file `config.json`.*
 


## <a name="advanced-usage"></a>Utilizzo avanzato

#### <a name="pass-in-your-own-argv"></a>Passare il proprio `argv`

È possibile passare il proprio `argv` come terzo argomento a `rc`.  Questo nel caso si voglia [usare il parser personale delle opzioni della riga di comando](https://github.com/dominictarr/rc/pull/12).

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>Passare il parser personale

Se è proprio necessario usare un parser non standard, è possibile farlo passando il parser come quarto argomento.
(lasciare il terzo come Null per ottenere il parser degli argomenti predefinito)

```javascript
require('rc')(appname, defaults, null, parser);
```

Questa tecnica può anche essere usata per forzare un formato più rigoroso, ad esempio solo JSON strict valido.

## <a name="note-on-performance"></a>Nota sulle prestazioni

`rc` esegue `fs.statSync`, quindi assicurarsi di non usarlo in un percorso del codice caldo (ad esempio, un gestore di richieste) 


## <a name="license"></a>Licenza

Più licenze con licenza BSD con due clausole, licenza MIT o licenza Apache versione 2.0
