---
ms.openlocfilehash: b8e00448fe7f8445c8e81302b03a852ee0f7e5cc
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051739"
---
<a name="aproba"></a>aproba
======

Validator di argomenti di funzione leggero

```
var validate = require("aproba")

function myfunc(a, b, c) {
  // `a` must be a string, `b` a number, `c` a function
  validate('SNF', arguments) // [a,b,c] is also valid
}

myfunc('test', 23, function () {}) // ok
myfunc(123, 23, function () {}) // type error
myfunc('test', 23) // missing arg error
myfunc('test', 23, function () {}, true) // too many args error

```

I tipi validi sono:

| tipo | description
| :--: | :----------
| *    | corrisponde a qualsiasi tipo
| A    | `Array.isArray` OPPURE un oggetto `arguments`
| S    | typeof == string
| N    | typeof == number
| F    | typeof == function
| O    | typeof == object and not type A and not type E
| B    | typeof == boolean
| E    | `instanceof Error` OPPURE `null` **(speciale: vedere di seguito)**
| Z    | == `null`

Gli errori di convalida generano tre tipi di eccezione, distinti da una proprietà `code` di `EMISSINGARG`, `EINVALIDTYPE` o `ETOOMANYARGS`.

Se si passa un tipo non valido, verrà generata un'eccezione con un codice `EUNKNOWNTYPE`.

Se viene trovato un argomento **error** e non è Null, gli argomenti rimanenti sono facoltativi.  Di conseguenza, se si specifica `ESO`, è come usare un oggetto `E` non magico in: `E|ESO|ZSO`.

### <a name="but-i-have-optional-arguments"></a>Ma sono presenti argomenti facoltativi.

È possibile fornire più firme separandole con pipe `|`.
Se una firma corrisponde agli argomenti, questi verranno considerati validi.

Ad esempio, si supponga di voler scrivere una firma per `fs.createWriteStream`.  La documentazione per descriverla è la seguente:

```
fs.createWriteStream(path[, options])
```

La firma è `SO|S`.  In altri termini, una stringa e un oggetto o semplicemente una stringa.

Ora, se si legge la documentazione completa di `fs`, si noterà che il percorso può anche essere un buffer.  Le opzioni possono essere una stringa, ovvero:
```
path <String> | <Buffer>
options <String> | <Object>
```

Per riprodurre questa situazione, è necessario enumerare completamente tutte le possibili combinazioni e ciò implica una firma `SO|SS|OO|OS|S|O`.  La complicazione è un elemento utile: Ricorda la complessità che si aggiunge all'API quando si eseguono operazioni di questo tipo.


### <a name="browser-support"></a>Supporto browser

Non ha dipendenze e dovrebbe funzionare nei browser, anche se aumenterà il livello di rumore delle analisi dello stack.

### <a name="why-this-exists"></a>Perché esiste

Voglio un validator di argomenti molto semplice. Deve eseguire due operazioni:

1. Essere più conciso e facile da usare rispetto alle asserzioni

2. Non incoraggiare una serie infinita di DSL

Questo è il motivo per cui i tipi vengono specificati da un singolo carattere e non esiste un argomento facoltativo. 

Non è progettato per convalidare i dati utente. Ciò riguarda in particolare l'asserzione dell'interfaccia delle funzioni.

Se occorre un livello superiore di convalida, è consigliabile scriverla manualmente o usare un'altra soluzione.

