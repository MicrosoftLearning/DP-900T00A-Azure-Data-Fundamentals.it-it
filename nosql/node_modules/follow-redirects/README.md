---
ms.openlocfilehash: aa7ddb2f2ce7709064cf5157f709fc1eff52cff7
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051643"
---
## <a name="follow-redirects"></a>Segui reindirizzamenti

Sostituzione drop-in per i moduli `http` e `https` di Node che segue automaticamente i reindirizzamenti.

[![versione di npm](https://img.shields.io/npm/v/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Stato della compilazione](https://github.com/follow-redirects/follow-redirects/workflows/CI/badge.svg)](https://github.com/follow-redirects/follow-redirects/actions)
[![Stato del code coverage](https://coveralls.io/repos/follow-redirects/follow-redirects/badge.svg?branch=master)](https://coveralls.io/r/follow-redirects/follow-redirects?branch=master)
[![download di npm](https://img.shields.io/npm/dm/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Sponsor in GitHub](https://img.shields.io/static/v1?label=Sponsor&message=%F0%9F%92%96&logo=GitHub)](https://github.com/sponsors/RubenVerborgh)

`follow-redirects` fornisce metodi [request](https://nodejs.org/api/http.html#http_http_request_options_callback) e [get](https://nodejs.org/api/http.html#http_http_get_options_callback) che si comportano in modo identico a quelli disponibili nei moduli [http](https://nodejs.org/api/http.html#http_http_request_options_callback) e [https](https://nodejs.org/api/https.html#https_https_request_options_callback) nativi, con l'eccezione che seguono senza problemi i reindirizzamenti.

```javascript
const { http, https } = require('follow-redirects');

http.get('http://bit.ly/900913', response => {
  response.on('data', chunk => {
    console.log(chunk);
  });
}).on('error', err => {
  console.error(err);
});
```

È possibile esaminare l'URL reindirizzato finale tramite la proprietà `responseUrl` in `response`.
Se non è stato eseguito alcun reindirizzamento, `responseUrl` è l'URL della richiesta originale.

```javascript
const request = https.request({
  host: 'bitly.com',
  path: '/UHfDGO',
}, response => {
  console.log(response.responseUrl);
  // 'http://duckduckgo.com/robots.txt'
});
request.end();
```

## <a name="options"></a>Opzioni
### <a name="global-options"></a>Opzioni globali
Le opzioni globali vengono impostate direttamente nel modulo `follow-redirects`:

```javascript
const followRedirects = require('follow-redirects');
followRedirects.maxRedirects = 10;
followRedirects.maxBodyLength = 20 * 1024 * 1024; // 20 MB
```

Sono supportate le opzioni globali seguenti:

- `maxRedirects` (valore predefinito: `21`): imposta il numero massimo di reindirizzamenti consentiti. Se superato, verrà generato un errore.

- `maxBodyLength` (valore predefinito: 10 MB): imposta la dimensione massima del corpo della richiesta. Se superato, verrà generato un errore.

### <a name="per-request-options"></a>Opzioni per richiesta
Le opzioni per richiesta vengono impostate passando un oggetto `options`:

```javascript
const url = require('url');
const { http, https } = require('follow-redirects');

const options = url.parse('http://bit.ly/900913');
options.maxRedirects = 10;
options.beforeRedirect = (options, { headers }) => {
  // Use this to adjust the request options upon redirecting,
  // to inspect the latest response headers,
  // or to cancel the request by throwing an error
  if (options.hostname === "example.com") {
    options.auth = "user:password";
  }
};
http.request(options);
```

Oltre alle [opzioni HTTP ](https://nodejs.org/api/http.html#http_http_request_options_callback) e [HTTPS standard](https://nodejs.org/api/https.html#https_https_request_options_callback), sono supportate le opzioni per richiesta seguenti:
- `followRedirects` (valore predefinito: `true`): indica se i reindirizzamenti devono essere seguiti.

- `maxRedirects` (valore predefinito: `21`): imposta il numero massimo di reindirizzamenti consentiti. Se superato, verrà generato un errore.

- `maxBodyLength` (valore predefinito: 10 MB): imposta la dimensione massima del corpo della richiesta. Se superato, verrà generato un errore.

- `beforeRedirect` (valore predefinito: `undefined`): facoltativamente, modificare la richiesta `options` nei reindirizzamenti o interrompere la richiesta generando un errore.

- `agents` (valore predefinito: `undefined`): imposta l'opzione `agent` per ogni protocollo, poiché HTTP e HTTPS usano agenti diversi. Valore di esempio: `{ http: new http.Agent(), https: new https.Agent() }`

- `trackRedirects` (valore predefinito: `false`): indica se archiviare i dettagli della risposta reindirizzata nella matrice `redirects` dell'oggetto response.


### <a name="advanced-usage"></a>Uso avanzato
Per impostazione predefinita, `follow-redirects` userà le implementazioni predefinite di Node.js di [`http`](https://nodejs.org/api/http.html) e [`https`](https://nodejs.org/api/https.html).
Per abilitare funzionalità come la memorizzazione nella cache e/o il rilevamento delle richieste intermedie, è invece possibile incapsulare `follow-redirects` per implementazioni di protocolli personalizzati:

```javascript
const { http, https } = require('follow-redirects').wrap({
  http: require('your-custom-http'),
  https: require('your-custom-https'),
});
```

Tali protocolli personalizzati richiedono solo un'implementazione del metodo `request`.

## <a name="browser-usage"></a>Utilizzo del browser

A causa del funzionamento del browser, gli equivalenti del browser `http` e `https` eseguono i reindirizzamenti per impostazione predefinita.

Richiedendo `follow-redirects` in questo modo:
```javascript
const http = require('follow-redirects/http');
const https = require('follow-redirects/https');
```
è possibile indicare facilmente a webpack e sistemi simili di sostituire `follow-redirect` con le versioni predefinite:

```json
{
  "follow-redirects/http"  : "http",
  "follow-redirects/https" : "https"
}
```

## <a name="contributing"></a>Contributo

Le richieste pull sono sempre benvenute. [Inviare un problema](https://github.com/follow-redirects/follow-redirects/issues) descrivendo in dettaglio la proposta prima di investire tempo prezioso. Le funzionalità aggiuntive e le correzioni di bug devono essere accompagnate da test. È possibile eseguire il gruppo di test in locale con un semplice comando `npm test`.

## <a name="debug-logging"></a>Registrazione debug

`follow-redirects` usa l'eccellente [debug](https://www.npmjs.com/package/debug) per la registrazione. Per attivare la registrazione, impostare la variabile di ambiente `DEBUG=follow-redirects` per l'output di debug da questo modulo. Quando si esegue il gruppo di test, a volte è utile impostare `DEBUG=*` anche per visualizzare l'output dal server Express.

## <a name="authors"></a>Autori

- [Ruben Verborgh](https://ruben.verborgh.org/)
- [Olivier Lalonde](mailto:olalonde@gmail.com)
- [James Talmage](mailto:james@talmage.io)

## <a name="license"></a>Licenza

[Licenza MIT](https://github.com/follow-redirects/follow-redirects/blob/master/LICENSE)
